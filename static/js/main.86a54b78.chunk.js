(this["webpackJsonpfrontend-code-challenge"]=this["webpackJsonpfrontend-code-challenge"]||[]).push([[0],{142:function(e,t,n){},151:function(e,t,n){},161:function(e,t){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),i=n.n(r),o=n(19),s=n.n(o),d=(n(142),n(13)),l=n(56),u=n(62),j=n(204),h=function(e,t){return"".concat(e,"-").concat(t.replace(/ /g,"-").toLowerCase())},b=n(6),v=function(){var e=Object(l.c)((function(e){return e.visitedProfiles}));return Object(b.jsx)("div",{children:e.length?e.map((function(e){return Object(b.jsx)(u.b,{to:"/profile/".concat(h(e.id,e.name)),children:Object(b.jsx)(j.a,{color:"primary",children:e.name})},e.id)})):""})},O=n(66),p=n(60),f=n(208),m=n(220),x=n(211),g=n(121),y=n.n(g),P=n(223),I=n(78),C=n(226),N=n(225),S=Object(C.a)(a||(a=Object(I.a)(["\n    query GetCharacters($page: Int, $filter: FilterCharacter ) {\n        characters(page: $page, filter: $filter) {\n            info {\n                count\n                pages\n            }\n            results {\n                id\n                name\n                image\n                status\n            }\n        }\n    }\n"]))),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(N.a)(S,{variables:e,skip:t})},w="Loading...",E=function(){var e=Object(d.g)(),t=Object(r.useState)(""),n=Object(p.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(p.a)(o,2),l=s[0],u=s[1],h=Object(r.useState)(!1),v=Object(p.a)(h,2),g=v[0],I=v[1],C=k({filter:{name:l}},""===l),N=C.loading,S=C.data;Object(r.useEffect)((function(){var e=setTimeout((function(){u(a)}),1e3);return function(){clearTimeout(e)}}),[a]);var E=function(t){u(""),I(!1),e.push("/search?q=".concat(t),{page:1})},_=function(){E(a)},L=function(e){"Enter"===e.key&&a&&(I(!1),_())},D=Array.from(new Set((null===S||void 0===S?void 0:S.characters.results.map((function(e){return e.name})))||(N?[w]:[])));return Object(b.jsxs)(f.a,{container:!0,spacing:3,children:[Object(b.jsx)(f.a,{item:!0,xs:9,children:Object(b.jsx)(P.a,{value:a,onChange:function(e,t){E(t||"")},onInputChange:function(e,t){t&&c(t),g||I(!0)},options:D,selectOnFocus:!0,freeSolo:!0,open:g,onBlur:function(){return I(!1)},renderInput:function(e){return Object(b.jsx)(m.a,Object(O.a)(Object(O.a)({},e),{},{label:"Search Character",InputProps:Object(O.a)(Object(O.a)({},e.InputProps),{},{onKeyDown:L,endAdornment:Object(b.jsxs)(i.a.Fragment,{children:[N?Object(b.jsx)(x.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},getOptionDisabled:function(e){return e===w}})}),Object(b.jsx)(f.a,{item:!0,xs:3,children:Object(b.jsx)(j.a,{variant:"contained",color:"primary",size:"large",startIcon:Object(b.jsx)(y.a,{}),onClick:_,children:"Search"})})]})},_=n(86),L=n(224),D=n(212),$=n(213),q=(n(151),n(122)),A=n.n(q),F=function(e){var t=e.name,n=e.status;return Object(b.jsx)("div",{className:"custom-card-header-container",children:Object(b.jsxs)("div",{className:"custom-card-header",children:[t,Object(b.jsx)("span",{className:A()("custom-card-header__status",n.toLowerCase()),children:n})]})})},T=function(e){var t=e.character,n=e.page,a=Object(d.g)();return Object(b.jsxs)(D.a,{children:[Object(b.jsx)(F,{name:t.name||"",status:t.status||""}),Object(b.jsx)("img",{src:t.image,alt:t.name}),Object(b.jsx)($.a,{children:Object(b.jsx)(j.a,{onClick:function(){return e=t.id||0,c=t.name||"",void a.push("/profile/".concat(h(e,c)),{page:n,previousPath:a.location.pathname+a.location.search});var e,c},size:"small",color:"primary",children:"Profile"})})]})},z=function(e){var t,n,a,c,i,o,s,l=e.searchQuery,u=void 0===l?"":l,j=Object(d.h)(),h=Object(r.useState)(Number(null===j||void 0===j||null===(t=j.state)||void 0===t?void 0:t.page)||1),v=Object(p.a)(h,2),O=v[0],m=v[1],x=k({page:O,filter:{name:u}}),g=x.loading,y=x.data;Object(r.useEffect)((function(){var e;m((null===j||void 0===j||null===(e=j.state)||void 0===e?void 0:e.page)||1)}),[j.state]);return Object(b.jsx)("div",{children:g?"Loading ...":(null===y||void 0===y?void 0:y.characters.results.length)?Object(b.jsxs)("div",{children:[Object(b.jsx)(f.a,{container:!0,spacing:3,children:null===y||void 0===y||null===(n=y.characters)||void 0===n||null===(a=n.results)||void 0===a?void 0:a.map((function(e){return Object(b.jsx)(f.a,{item:!0,children:Object(b.jsx)(T,{character:e,page:O})},e.id)}))}),((null===y||void 0===y||null===(c=y.characters)||void 0===c||null===(i=c.info)||void 0===i?void 0:i.pages)||0)>1?Object(b.jsx)(L.a,{onChange:function(e,t){m(t)},page:O,count:null===y||void 0===y||null===(o=y.characters)||void 0===o||null===(s=o.info)||void 0===s?void 0:s.pages,color:"primary"}):""]}):Object(b.jsx)(_.a,{variant:"h6",children:"No Records found."})})},B=function(){return Object(b.jsx)(z,{})},G=n(210),Q=n(214),J=n(215),R=n(123),H=n.n(R),K=Object(C.a)(c||(c=Object(I.a)(["\n    query getCharacter ($id: ID!) {\n        character (id: $id){\n            id\n            name\n            status\n            image\n            location {\n                name\n            }\n            species\n            type\n            gender\n        }\n    }\n"]))),M=function(e){return Object(N.a)(K,{variables:{id:e}})},V="ADD_VISITED_PROFILE",U="Not Available",W=function(){var e,t=Object(d.g)(),n=Object(d.i)(),a=Object(l.b)(),c=Number(function(e){var t=e.split("-");return Number(t.shift())}(n.characterId)),i=function(){var e;t.push((null===(e=t.location.state)||void 0===e?void 0:e.previousPath)||"/",t.location.state)};(isNaN(c)||0===c)&&i();var o=M(c),s=o.data,u=o.loading;return Object(r.useEffect)((function(){var e,t;!u&&(null===s||void 0===s||null===(e=s.character)||void 0===e?void 0:e.id)&&a((t=null===s||void 0===s?void 0:s.character,{type:V,payload:{id:t.id,name:t.name||""}}))}),[u,s,a]),Object(b.jsx)("div",{children:u?"Loading ...":Object(b.jsxs)("div",{children:[Object(b.jsx)(_.a,{variant:"h4",children:null===s||void 0===s?void 0:s.character.name}),Object(b.jsx)("img",{src:null===s||void 0===s?void 0:s.character.image,alt:null===s||void 0===s?void 0:s.character.name}),Object(b.jsxs)(G.a,{children:[Object(b.jsx)(Q.a,{divider:!0,children:Object(b.jsx)(J.a,{primary:"Status",secondary:(null===s||void 0===s?void 0:s.character.status)||U})}),Object(b.jsx)(Q.a,{divider:!0,children:Object(b.jsx)(J.a,{primary:"Species",secondary:(null===s||void 0===s?void 0:s.character.species)||U})}),Object(b.jsx)(Q.a,{divider:!0,children:Object(b.jsx)(J.a,{primary:"Type",secondary:(null===s||void 0===s?void 0:s.character.type)||U})}),Object(b.jsx)(Q.a,{divider:!0,children:Object(b.jsx)(J.a,{primary:"Gender",secondary:(null===s||void 0===s?void 0:s.character.gender)||U})}),Object(b.jsx)(Q.a,{divider:!0,children:Object(b.jsx)(J.a,{primary:"Location Name",secondary:(null===s||void 0===s||null===(e=s.character.location)||void 0===e?void 0:e.name)||U})})]}),Object(b.jsx)(j.a,{onClick:i,variant:"contained",startIcon:Object(b.jsx)(H.a,{}),children:"Go Back"})]})})},X=n(124),Y=n.n(X),Z=[{path:"/",component:B,basePath:"",title:"Home Page"},{path:"/profile/:characterId",component:W,basePath:"profile",title:"Character Profile"},{path:"/search",component:function(){var e=Object(d.h)(),t=Y.a.parse(e.search,{ignoreQueryPrefix:!0});return Object(b.jsx)(z,{searchQuery:t.q})},basePath:"search",title:"Search"}],ee=function(){var e=Object(d.h)();return Object(r.useEffect)((function(){var t=Z.find((function(t){return e.pathname.split("/")[1]===t.basePath}));document.title=(null===t||void 0===t?void 0:t.title)||""}),[e.pathname]),Object(b.jsxs)("div",{className:"app__container",children:[Object(b.jsx)(E,{}),Object(b.jsxs)(d.d,{children:[Z.map((function(e){return Object(b.jsx)(d.b,{path:e.path,exact:!0,component:e.component},e.path)})),Object(b.jsx)(d.b,{render:function(){return Object(b.jsx)(d.a,{to:"/"})}})]}),Object(b.jsx)("div",{className:"app__footer",children:Object(b.jsx)(v,{})})]})},te=n(221),ne=n(222),ae=n(219),ce=(n(163),n(128)),re=n(127),ie={visitedProfiles:[]},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if(e.visitedProfiles.find((function(e){return e.id===t.payload.id})))return e;var n=[t.payload].concat(Object(re.a)(e.visitedProfiles));return n.length>10&&n.pop(),{visitedProfiles:n};default:return e}},se=Object(ce.a)(oe),de=new te.a({uri:"https://rickandmortyapi.com/graphql",cache:new ne.a});s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(l.a,{store:se,children:Object(b.jsx)(ae.a,{client:de,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(ee,{})})})})}),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.86a54b78.chunk.js.map